<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Revolutionary Coin</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --primary-color: white;
      --bg-opacity: 0.8;
      --border-radius: 10px;
      --max-width: 90%;
    }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: var(--primary-color);
      text-align: center;
      overscroll-behavior: none;
      -webkit-tap-highlight-color: transparent;
      min-height: 100vh;
    }
    
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .container {
      padding: 20px;
      position: relative;
      min-height: 100vh;
    }
    
    .coin-img {
      width: 200px;
      height: 200px;
      margin: 20px auto;
      display: block;
      cursor: pointer;
      touch-action: manipulation;
      position: relative;
      z-index: 1;
      transition: all 0.1s;
      filter: drop-shadow(0 0 10px gold);
    }
    
    .coin-img:active {
      transform: scale(0.95);
    }
    
    .coin-count {
      margin: 10px 0;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 5px rgba(0,0,0,0.5);
      background: rgba(0,0,0,0.3);
      padding: 10px 20px;
      border-radius: 20px;
      display: inline-block;
    }
    
    .energy-bar {
      background: #555;
      height: 20px;
      margin: 20px auto;
      border-radius: var(--border-radius);
      width: var(--max-width);
      overflow: hidden;
      position: relative;
      border: 2px solid #333;
      box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
    }
    
    .energy-fill {
      background: linear-gradient(to right, #00c853, #b2ff59);
      height: 100%;
      width: 100%;
      transition: width 0.5s;
      box-shadow: 0 0 5px rgba(0,200,83,0.5);
    }
    
    .buy-coffee {
      position: absolute;
      right: 10px;
      top: 30px;
      z-index: 10;
    }
    
    .tab-content {
      margin: 30px auto;
      max-width: var(--max-width);
      min-height: 150px;
      background: rgba(0, 0, 0, 0.7);
      border-radius: var(--border-radius);
      padding: 15px;
      z-index: 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .tab-section {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .tab-section.active {
      display: block;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, var(--bg-opacity));
      display: flex;
      justify-content: space-around;
      padding: 10px 0;
      z-index: 999;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .bottom-nav button {
      background: none;
      border: none;
      color: var(--primary-color);
      font-size: 16px;
      cursor: pointer;
      touch-action: manipulation;
      padding: 10px 15px;
      transition: all 0.2s;
      border-radius: 8px;
      flex: 1;
      margin: 0 5px;
    }
    
    .bottom-nav button.active {
      background: rgba(255, 215, 0, 0.3);
      transform: translateY(-5px);
      box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }
    
    .skin-item, .upgrade-item {
      margin: 10px auto;
      padding: 10px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius);
      max-width: var(--max-width);
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.2s;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .skin-item:hover, .upgrade-item:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-2px);
    }
    
    .preview-img {
      width: 60px;
      height: 60px;
      margin-right: 10px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid gold;
    }
    
    .buy-btn {
      padding: 8px 15px;
      background: linear-gradient(to right, #ffd700, #ffa500);
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      touch-action: manipulation;
      color: #000;
      min-width: 80px;
      transition: all 0.2s;
      box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    }
    
    .buy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 8px rgba(0,0,0,0.3);
    }
    
    .buy-btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #222;
      padding: 20px;
      border-radius: var(--border-radius);
      color: var(--primary-color);
      z-index: 1000;
      max-width: var(--max-width);
      width: 90%;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
      border: 1px solid gold;
    }
    
    .modal.active {
      display: block;
      animation: modalAppear 0.3s ease;
    }
    
    @keyframes modalAppear {
      from { opacity: 0; transform: translate(-50%, -40%); }
      to { opacity: 1; transform: translate(-50%, -50%); }
    }
    
    input, code {
      width: calc(100% - 20px);
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      box-sizing: border-box;
      background: #333;
      border: 1px solid #555;
      color: white;
      font-family: monospace;
    }
    
    .firework-particle {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: gold;
      z-index: 2;
      pointer-events: none;
    }
    
    @keyframes firework {
      0% { transform: translate(0, 0); opacity: 1; }
      100% { transform: translate(var(--x), var(--y)); opacity: 0; }
    }
    
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: rgba(0,0,0,0.4);
      border-radius: var(--border-radius);
      margin: 0 auto 20px;
      max-width: var(--max-width);
    }
    
    .status-box {
      background: rgba(0,0,0,0.5);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 14px;
    }
    
    .debug-info {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.7);
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 12px;
      z-index: 1000;
    }
    
    .notification {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: gold;
      padding: 10px 20px;
      border-radius: 5px;
      z-index: 1001;
      animation: slideDown 0.5s ease;
      display: none;
    }
    
    @keyframes slideDown {
      from { top: -50px; opacity: 0; }
      to { top: 20px; opacity: 1; }
    }
    
    .powered-by {
      position: absolute;
      bottom: 60px;
      width: 100%;
      text-align: center;
      font-size: 12px;
      opacity: 0.7;
    }
    
    h1 {
      text-shadow: 0 0 10px rgba(255,215,0,0.5);
      margin-bottom: 30px;
      background: linear-gradient(to right, gold, #ffd700, gold);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-size: 2.5rem;
    }
  </style>
</head>
<body>
  <!-- Debug Information -->
  <div class="debug-info">Status: <span id="debugStatus">Initializing...</span></div>
  
  <!-- Notification -->
  <div class="notification" id="notification"></div>
  
  <!-- Main Container -->
  <div class="container">
    <!-- Game Header -->
    <div class="game-header">
      <div class="status-box">Energy: <span id="energyValue">100</span>%</div>
      <div class="status-box">Multiplier: x<span id="multiplierValue">1</span></div>
    </div>
    
    <!-- Coin Image -->
    <img src="https://via.placeholder.com/200/ffd700/000000?text=UAS+Coin" id="coinImage" class="coin-img" alt="Tap Coin" />
    
    <!-- Coin Count -->
    <h2 id="tapCount" class="coin-count">UAS: <span id="coinValue">0</span></h2>

    <!-- Tab Content Area -->
    <div id="tabContent" class="tab-content">
      <!-- Home Tab -->
      <div id="homeTab" class="tab-section active">
        <p>Keep tapping the coin to earn UAS!</p>
        <p>⚡️ Energy recharges automatically</p>
        <p>✨ Unlock upgrades to earn faster</p>
      </div>
      
      <!-- Earn Tab -->
      <div id="earnTab" class="tab-section">
        <h3>Earn Bonus UAS</h3>
        <div class="upgrade-item">
          Daily Bonus (100 UAS) 
          <button class="buy-btn" id="dailyBonus">Claim</button>
        </div>
        <div class="upgrade-item">
          Watch Video (250 UAS) 
          <button class="buy-btn">Watch</button>
        </div>
        <div class="upgrade-item">
          Complete Survey (500 UAS) 
          <button class="buy-btn">Start</button>
        </div>
      </div>
      
      <!-- Skins Tab -->
      <div id="skinsTab" class="tab-section">
        <h2>Country Themed Skins</h2>
        <div id="skinsList">
          <div class="skin-item">
            <span>
              <img src="https://via.placeholder.com/60/cc0000/ffffff?text=US" class="preview-img">
              United States
            </span>
            <button class="buy-btn" data-skin="usa">5 USDT</button>
          </div>
          <div class="skin-item">
            <span>
              <img src="https://via.placeholder.com/60/0066cc/ffffff?text=EU" class="preview-img">
              European Union
            </span>
            <button class="buy-btn" data-skin="europe">5 USDT</button>
          </div>
          <div class="skin-item">
            <span>
              <img src="https://via.placeholder.com/60/ff9933/000000?text=IN" class="preview-img">
              India
            </span>
            <button class="buy-btn" data-skin="india">5 USDT</button>
          </div>
        </div>
      </div>
      
      <!-- Upgrades Tab -->
      <div id="upgradesTab" class="tab-section">
        <h2>Upgrade Packages</h2>
        <div class="upgrade-item">x2 Speed Boost (5 USDT) <button class="buy-btn" data-item="speedBoost2">Buy</button></div>
        <div class="upgrade-item">x5 Speed Boost (10 USDT) <button class="buy-btn" data-item="speedBoost5">Buy</button></div>
        <div class="upgrade-item">x10 Speed Boost (15 USDT) <button class="buy-btn" data-item="speedBoost10">Buy</button></div>
        <div class="upgrade-item">Energy Refill x2 (5 USDT) <button class="buy-btn" data-item="energyRefill2">Buy</button></div>
        <div class="upgrade-item">Energy Refill x10 (10 USDT) <button class="buy-btn" data-item="energyRefill10">Buy</button></div>
        <div class="upgrade-item">AutoBot Mode (10 USDT) <button class="buy-btn" data-item="autoBot">Buy</button></div>
      </div>
      
      <!-- Referral Tab -->
      <div id="referralTab" class="tab-section">
        <h2>Referral System</h2>
        <p id="refStatus">Invite friends & earn 10% of their UAS + 1000 UAS bonus!</p>
        <p>Your Referral Link:</p>
        <input type="text" id="referralLink" value="https://t.me/UASReferralBot?start=user123" readonly>
        <p style="font-size:14px">Share with friends to grow your team!</p>
        <div class="upgrade-item">
          Team Size: <strong>0</strong>
          <button class="buy-btn">View Team</button>
        </div>
      </div>
      
      <!-- Coffee Tab -->
      <div id="coffeeTab" class="tab-section">
        <h2>Support Development</h2>
        <p>Donate USDT to support future updates!</p>
        <p><strong>Wallet Address:</strong></p>
        <code id="walletAddress">0x86d69358e89e1ec95b9a35828363f41d7e55d880</code>
        <p style="margin-top:10px">Note: Whatever amount you donate, you'll receive 20x its value upon launch.</p>
      </div>
    </div>
    
    <div class="powered-by">Powered by Revolutionary Blockchain Technology</div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <button data-tab="homeTab" class="active">🏠 Home</button>
    <button data-tab="earnTab">💰 Earn</button>
    <button data-tab="skinsTab">🎨 Skins</button>
    <button data-tab="upgradesTab">⚡️ Upgrades</button>
    <button data-tab="referralTab">👥 Referral</button>
  </div>

  <!-- Payment Modal -->
  <div id="paymentModal" class="modal">
    <h3>Purchase Item</h3>
    <p>Send USDT to this wallet:</p>
    <code id="modalWalletAddress">0x86d69358e89e1ec95b9a35828363f41d7e55d880</code>
    <p>After payment, enter your transaction hash:</p>
    <input type="text" id="txHash" placeholder="Transaction Hash">
    <button style="margin-top:10px;padding:10px 20px;" class="buy-btn" id="submitPayment">Submit</button>
  </div>

  <script>
    // Configuration
    const CONFIG = {
      walletAddress: "0x86d69358e89e1ec95b9a35828363f41d7e55d880",
      skinPrices: {
        usa: 5, europe: 5, india: 5
      }
    };

    // Game State
    let gameState = {
      coins: 0,
      energy: 100,
      skin: "default",
      multiplier: 1,
      autoBot: false,
      skinInventory: ["default"],
      referralCode: "user_" + Math.floor(Math.random() * 10000),
      referredBy: null,
      lastTap: 0
    };

    // UI Manager
    class UIManager {
      constructor() {
        this.debugStatus = document.getElementById("debugStatus");
        this.notification = document.getElementById("notification");
      }
      
      updateUI() {
        document.getElementById("coinValue").textContent = gameState.coins;
        document.getElementById("energyValue").textContent = gameState.energy;
        document.getElementById("multiplierValue").textContent = gameState.multiplier;
        document.getElementById("energyFill").style.width = `${gameState.energy}%`;
        document.getElementById("referralLink").value = 
          `https://t.me/UASReferralBot?start=${gameState.referralCode}`;
      }
      
      showNotification(message) {
        this.notification.textContent = message;
        this.notification.style.display = "block";
        setTimeout(() => {
          this.notification.style.display = "none";
        }, 3000);
      }
      
      updateDebugStatus(message) {
        if (this.debugStatus) {
          this.debugStatus.textContent = message;
        }
      }
      
      showTab(tabId) {
        const sections = document.querySelectorAll(".tab-section");
        sections.forEach(el => el.classList.remove("active"));
        
        const tab = document.getElementById(tabId);
        if (tab) {
          tab.classList.add("active");
        }
        
        document.querySelectorAll(".bottom-nav button").forEach(btn => {
          btn.classList.toggle("active", btn.dataset.tab === tabId);
        });
      }
      
      openModal(item) {
        const modal = document.getElementById("paymentModal");
        if (modal) {
          modal.classList.add("active");
        }
      }
      
      closeModal() {
        const modal = document.getElementById("paymentModal");
        if (modal) {
          modal.classList.remove("active");
        }
        const txHash = document.getElementById("txHash");
        if (txHash) txHash.value = "";
      }
      
      triggerFirework() {
        const coin = document.getElementById("coinImage");
        if (!coin) return;
        
        const rect = coin.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        
        for (let i = 0; i < 12; i++) {
          const particle = document.createElement("div");
          particle.className = "firework-particle";
          const angle = (i / 12) * 2 * Math.PI;
          const distance = 50 + Math.random() * 50;
          const x = Math.cos(angle) * distance;
          const y = Math.sin(angle) * distance;
          particle.style.left = `${centerX}px`;
          particle.style.top = `${centerY}px`;
          particle.style.setProperty("--x", `${x}px`);
          particle.style.setProperty("--y", `${y}px`);
          particle.style.animation = `firework 0.5s ease-out forwards`;
          document.body.appendChild(particle);
          setTimeout(() => particle.remove(), 500);
        }
      }
    }

    // Game Logic
    class Game {
      constructor(uiManager) {
        this.uiManager = uiManager;
        this.energyRechargeInterval = null;
        this.autoTapInterval = null;
        this.isReady = false;
      }
      
      init() {
        this.uiManager.updateDebugStatus("Loading game...");
        
        // Load saved state
        this.loadGameState();
        
        // Initialize UI
        this.uiManager.updateUI();
        this.uiManager.updateDebugStatus("Ready - Tap to play!");
        
        // Start background processes
        this.startEnergyRecharge();
        this.startAutoTap();
        
        this.isReady = true;
      }
      
      loadGameState() {
        const savedState = localStorage.getItem("revolutionaryCoinState");
        if (savedState) {
          try {
            gameState = JSON.parse(savedState);
            this.uiManager.showNotification("Game loaded successfully!");
          } catch (e) {
            console.error("Error loading game state:", e);
          }
        }
      }
      
      saveGameState() {
        localStorage.setItem("revolutionaryCoinState", JSON.stringify(gameState));
      }
      
      tapCoin() {
        if (!this.isReady) return;
        
        const now = Date.now();
        if (now - gameState.lastTap < 100) return; // Simple tap cooldown
        gameState.lastTap = now;
        
        if (gameState.energy <= 0) {
          this.uiManager.showNotification("Out of energy! Waiting for recharge...");
          return;
        }
        
        // Trigger visual effect
        this.uiManager.triggerFirework();
        
        // Calculate earnings
        const earned = gameState.multiplier;
        gameState.coins += earned;
        gameState.energy -= 2;
        
        // Update UI
        this.uiManager.updateUI();
        this.uiManager.showNotification(`+${earned} UAS!`);
        
        // Save state
        this.saveGameState();
      }
      
      startEnergyRecharge() {
        if (this.energyRechargeInterval) clearInterval(this.energyRechargeInterval);
        
        this.energyRechargeInterval = setInterval(() => {
          if (gameState.energy < 100) {
            gameState.energy = Math.min(gameState.energy + 1, 100);
            this.uiManager.updateUI();
            this.saveGameState();
          }
        }, 3000);
      }
      
      startAutoTap() {
        if (this.autoTapInterval) clearInterval(this.autoTapInterval);
        
        this.autoTapInterval = setInterval(() => {
          if (gameState.autoBot && gameState.energy > 0) {
            this.tapCoin();
          }
        }, 2000);
      }
      
      buyItem(item) {
        this.uiManager.openModal(item);
      }
      
      claimDailyBonus() {
        if (this.canClaimDailyBonus()) {
          gameState.coins += 100;
          this.uiManager.updateUI();
          this.uiManager.showNotification("Daily bonus claimed! +100 UAS");
          this.saveGameState();
          
          // Store last claim time
          localStorage.setItem("lastDailyClaim", Date.now().toString());
        } else {
          this.uiManager.showNotification("Come back tomorrow for your next bonus!");
        }
      }
      
      canClaimDailyBonus() {
        const lastClaim = localStorage.getItem("lastDailyClaim");
        if (!lastClaim) return true;
        
        const lastClaimDate = new Date(parseInt(lastClaim));
        const now = new Date();
        
        // Check if at least 24 hours have passed
        return (now - lastClaimDate) >= (24 * 60 * 60 * 1000);
      }
    }

    // Main Initialization
    const uiManager = new UIManager();
    const game = new Game(uiManager);

    document.addEventListener("DOMContentLoaded", () => {
      // Initialize the game
      game.init();
      
      // Set wallet addresses
      document.querySelectorAll("#walletAddress, #modalWalletAddress").forEach(el => {
        el.textContent = CONFIG.walletAddress;
      });
      
      // Event Listeners
      document.getElementById("coinImage").addEventListener("click", () => game.tapCoin());
      
      document.querySelectorAll(".bottom-nav button[data-tab]").forEach(btn => {
        btn.addEventListener("click", () => {
          uiManager.showTab(btn.dataset.tab);
        });
      });
      
      document.querySelectorAll(".buy-btn").forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          
          if (btn.id === "dailyBonus") {
            game.claimDailyBonus();
          } else if (btn.dataset.item) {
            game.buyItem(btn.dataset.item);
          } else if (btn.dataset.skin) {
            game.buyItem(btn.dataset.skin);
          } else if (btn.dataset.tab) {
            uiManager.showTab(btn.dataset.tab);
          }
        });
      });
      
      document.getElementById("submitPayment").addEventListener("click", () => {
        const txHash = document.getElementById("txHash").value;
        if (txHash && txHash.length > 10) {
          uiManager.showNotification("Payment received! Item unlocked.");
          uiManager.closeModal();
        } else {
          uiManager.showNotification("Please enter a valid transaction hash");
        }
      });
      
      // Touch support for mobile
      document.getElementById("coinImage").addEventListener("touchstart", (e) => {
        e.preventDefault();
        game.tapCoin();
      }, { passive: false });
    });
  </script>
</body>
  </html>
