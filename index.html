<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>UAScoin Game</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      background: url('background.png') no-repeat center center fixed;
      background-size: cover;
      color: white;
      text-align: center;
    }

    #tap-count {
      font-size: 2.5rem;
      margin: 10px 0;
      text-shadow: 0 0 5px black;
    }

    #coin {
      width: 200px;
      height: 200px;
      margin: 10px auto;
      display: block;
      transition: transform 0.2s ease;
    }

    #coin:active {
      transform: scale(1.1);
    }

    .energy-bar {
      width: 100%;
      background-color: rgba(255, 255, 255, 0.2);
      margin: 0;
    }

    .energy-bar-inner {
      height: 20px;
      background-color: limegreen;
      width: 100%;
      transition: width 0.3s;
    }

    .tab-content {
      display: none;
      padding: 10px;
    }

    .tab-content.active {
      display: block;
    }

    .nav-bar {
      display: flex;
      justify-content: space-around;
      position: fixed;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
    }

    .nav-item {
      flex: 1;
      padding: 15px 5px;
      font-size: 18px;
      color: white;
      cursor: pointer;
    }

    .skin-card {
      background: rgba(255, 255, 255, 0.85);
      color: black;
      margin: 10px auto;
      padding: 10px;
      border-radius: 10px;
      width: 90%;
      max-width: 300px;
    }

    .skin-card img {
      width: 100px;
      height: 100px;
    }

    .skin-card button {
      margin: 5px;
      padding: 5px 10px;
    }

    .referral-section {
      margin-top: 20px;
    }

    .referral-code {
      font-size: 1.2rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="energy-bar">
    <div class="energy-bar-inner" id="energy-fill"></div>
  </div>

  <h1 id="tap-count">0</h1>
  <img id="coin" src="bronze_coin.png" alt="Tap Coin" />

  <div id="earn" class="tab-content active"></div>
  <div id="skins" class="tab-content"></div>
  <div id="referrals" class="tab-content"></div>
  <div id="leaderboard" class="tab-content"><p>Coming soon</p></div>
  <div id="upgrades" class="tab-content"><p>Coming soon</p></div>

  <div class="nav-bar">
    <div class="nav-item" onclick="showTab('earn')">Earn</div>
    <div class="nav-item" onclick="showTab('skins')">Skins</div>
    <div class="nav-item" onclick="showTab('referrals')">Refer</div>
    <div class="nav-item" onclick="showTab('leaderboard')">Ranks</div>
  </div>

  <script>
    const countrySkins = [
      "Pakistan", "india", "iran", "turkey", "china",
      "usa", "uk", "germany", "france", "italy",
      "africa", "brazil", "suadiaarab"
    ];

    let tapCount = parseInt(localStorage.getItem("tapCount")) || 0;
    let energy = parseInt(localStorage.getItem("energy")) || 1000;
    let ownedSkins = JSON.parse(localStorage.getItem("ownedSkins")) || [];
    let currentSkin = localStorage.getItem("currentSkin") || null;
    let referralCode = localStorage.getItem("refCode") || Math.random().toString(36).substr(2, 6).toUpperCase();
    localStorage.setItem("refCode", referralCode);
    let team = JSON.parse(localStorage.getItem("refTeam")) || [];

    function updateTapDisplay() {
      document.getElementById("tap-count").innerText = tapCount;
      updateCoinImage();
    }

    function getLeagueSkin() {
      if (tapCount >= 200000000) return "vibranium_coin.png";
      if (tapCount >= 100000000) return "adamantium_coin.png";
      if (tapCount >= 50000000) return "platinum_coin.png";
      if (tapCount >= 1000000) return "diamond_coin.png";
      if (tapCount >= 500000) return "gold_coin.png";
      if (tapCount >= 10000) return "silver_coin.png";
      return "bronze_coin.png";
    }

    function getCoinImage() {
      const skinName = countrySkins.find(s => s === currentSkin);
      if (skinName && ownedSkins.includes(skinName)) return skinName + ".png";
      return getLeagueSkin();
    }

    function updateCoinImage() {
      document.getElementById("coin").src = getCoinImage();
    }

    function handleTap() {
      if (energy <= 0) return alert("No energy!");
      tapCount++;
      energy--;
      localStorage.setItem("tapCount", tapCount);
      localStorage.setItem("energy", energy);
      updateTapDisplay();
      updateEnergy();
    }

    function updateEnergy() {
      document.getElementById("energy-fill").style.width = `${Math.max(0, energy / 1000) * 100}%`;
    }

    function showTab(id) {
      document.querySelectorAll(".tab-content").forEach(tab => tab.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }

    function renderSkinShop() {
      const container = document.getElementById("skins");
      container.innerHTML = "<h2>Country Flag Skins</h2>";
      countrySkins.forEach(skin => {
        const owned = ownedSkins.includes(skin);
        container.innerHTML += `
          <div class="skin-card">
            <h3>${skin.toUpperCase()}</h3>
            <img src="${skin}.png" alt="${skin}" />
            <p>Price: 5 USDT</p>
            ${owned ? `<button onclick="selectSkin('${skin}')">Select</button>` :
              `<button onclick="buySkin('${skin}')">Buy</button>`}
          </div>`;
      });
    }

    function buySkin(skin) {
      ownedSkins.push(skin);
      localStorage.setItem("ownedSkins", JSON.stringify(ownedSkins));
      renderSkinShop();
      alert(`Purchased ${skin} skin!`);
    }

    function selectSkin(skin) {
      currentSkin = skin;
      localStorage.setItem("currentSkin", skin);
      updateCoinImage();
      alert("Skin applied!");
    }

    function renderReferrals() {
      const container = document.getElementById("referrals");
      container.innerHTML = `
        <h2>Referral System</h2>
        <div class="referral-section">
          <p>Your Code:</p>
          <div class="referral-code">${referralCode}</div>
          <button onclick="copyCode()">Copy</button>
          <p>Referral Link: <br><small>https://yourgame.com?ref=${referralCode}</small></p>
        </div>
        <h3>Your Team</h3>
        <ul>${team.map(u => `<li>${u}</li>`).join("")}</ul>`;
    }

    function copyCode() {
      navigator.clipboard.writeText(referralCode);
      alert("Code copied!");
    }

    // Coin tap
    document.getElementById("coin").addEventListener("click", handleTap);

    // On load
    document.addEventListener("DOMContentLoaded", () => {
      updateTapDisplay();
      updateEnergy();
      renderSkinShop();
      renderReferrals();
    });
  </script>
</body>
</html>
